# System Administrator Guide

This guide will explain how to set up Alcove for system administrators.

## Requirements

Alcove requires version 10.x of Node.js. You can find the latest Node.js 10.x releases [here](https://nodejs.org/download/release/latest-v10.x/).

It is possible that older versions work as well, but they are untested and unsupported.

## Usage

Alcove will not start without a system configuration and at least one machine configuration.

### System Configuration

Copy the example configuration in `<project_root>/config/alcove.ini.example` to `/etc/alcove/alcove.ini`. Your configuration only needs to contain the required options that don't have defaults (`data_dir`, `notifications.email_to`, and `notifications.email_from`).

### Machine Configuration(s)

Copy the example configuration in `<project_root>/config/machines/machine.ini.example` to `/etc/alcove/machines/<machine_name>.ini` for each machine. Your configuration only needs the required options that don't have defaults (`name`, `host`, and `schedule`).

### Connections

The system creates backups using the rsync utility over an SSH connection. It works best if you don't have to worry about permissions issues, so the system should be authorized to connect to remote machines using the `root` user with a strong SSH key pair. By default, connections will use the identity of the user that runs the system (`~/.ssh/id_rsa`), but it is a good idea to generate a new identity solely for this system. The system cannot connect to remote machines if the SSH identity is password-protected.

To generate a new SSH identity, run:

```shell script
ssh-keygen -f /etc/alcove/id_rsa
```

Inside your system configuration, specify this identity using the `rsync.identity` option and setting it to the location of the private key. Make sure the public key is accessible at the same path as the private key. Also, ensure that the key has the appropriate username and permissions if it was generated by a different user than the one that will be used to execute the system.

### Errors

If Alcove crashes, take a look at this [guide](exit-codes.md) on exit codes. If that does explain the problem, file a new issue [here](https://github.com/bioneos/alcove/issues/new).
